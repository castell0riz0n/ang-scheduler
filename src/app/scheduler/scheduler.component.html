
<div class="scheduler-container d-flex flex-column h-100">
  <!-- Header with navigation controls -->
  <div class="calendar-header d-flex justify-content-between align-items-center p-2 border-bottom">
    <div class="calendar-controls d-flex align-items-center">
      <button class="btn btn-outline-primary me-2"
              (click)="navigateToToday()"
              aria-label="Go to today">
        Today
      </button>
      <div class="btn-group me-2" role="group" aria-label="Navigation controls">
        <button class="btn btn-outline-secondary"
                (click)="navigateToPrevious()"
                aria-label="Previous period">
          <i class="bi bi-chevron-left"></i>
        </button>
        <button class="btn btn-outline-secondary"
                (click)="navigateToNext()"
                aria-label="Next period">
          <i class="bi bi-chevron-right"></i>
        </button>
      </div>
      <h2 class="m-0 h5" aria-live="polite">{{ viewTitle() }}</h2>
    </div>

    <div class="view-controls d-flex">
      <div class="btn-group" role="group" aria-label="View controls">
        <button class="btn btn-outline-secondary"
                [class.active]="currentView() === 'month'"
                (click)="changeView('month')"
                aria-pressed="{{ currentView() === 'month' }}"
                aria-label="Month view">
          Month
        </button>
        <button class="btn btn-outline-secondary"
                [class.active]="currentView() === 'week'"
                (click)="changeView('week')"
                aria-pressed="{{ currentView() === 'week' }}"
                aria-label="Week view">
          Week
        </button>
        <button class="btn btn-outline-secondary"
                [class.active]="currentView() === 'day'"
                (click)="changeView('day')"
                aria-pressed="{{ currentView() === 'day' }}"
                aria-label="Day view">
          Day
        </button>
      </div>
    </div>
  </div>

  <!-- Filters section - could be collapsible -->
  <div class="calendar-filters border-bottom p-2">
    <app-calendar-filters
      [filter]="this._filter()"
      [locale]="this._locale()"
      [timeZone]="this._timeZone()"
      (filterChanged)="this._filter.set($event)">
    </app-calendar-filters>
  </div>

  <!-- Calendar views container -->
  <div class="calendar-view-container flex-grow-1 position-relative">
    <!-- Month View -->
    <app-month-view
      *ngIf="currentView() === 'month'"
      [events]="expandedEvents()"
      [centerDate]="currentDate()"
      [locale]="this._locale()"
      [timeZone]="this._timeZone()"
      [options]="this._options()"
      (eventMoved)="handleEventMove($event)"
      (slotClicked)="handleSlotClick($event)"
      (eventEdited)="handleEventEdit($event)">
    </app-month-view>

    <!-- Week View -->
    <app-week-view
      *ngIf="currentView() === 'week'"
      [events]="expandedEvents()"
      [centerDate]="currentDate()"
      [locale]="this._locale()"
      [timeZone]="this._timeZone()"
      [options]="this._options()"
      (eventMoved)="handleEventMove($event)"
      (slotClicked)="handleSlotClick($event)"
      (eventEdited)="handleEventEdit($event)">
    </app-week-view>

    <!-- Day View -->
    <app-day-view
      *ngIf="currentView() === 'day'"
      [events]="expandedEvents()"
      [centerDate]="currentDate()"
      [locale]="this._locale()"
      [timeZone]="this._timeZone()"
      [options]="this._options()"
      (eventMoved)="handleEventMove($event)"
      (slotClicked)="handleSlotClick($event)"
      (eventEdited)="handleEventEdit($event)">
    </app-day-view>
  </div>
</div>
